import{e as M,ar as b,as as y,at as C,v as N,r as x,n as r,z as F,w as I,t as V,p as t,s as B}from"./index-5e2885e4.js";import{e as z,f as j}from"./index-f1112f4d.js";import{M as O}from"./index-0bca5bb9.js";import{N as U}from"./Form-6e61837b.js";import{N as c}from"./FormItem-7f69a4d7.js";import{N as p}from"./Space-d49acb7b.js";import{N as h}from"./Input-1bbd5e95.js";import{N as f}from"./Tooltip-5624ecb6.js";import{N as w}from"./Icon-b461a67a.js";import{N as k,a as g}from"./RadioGroup-92bc79b0.js";import"./service-d19f0ccd.js";import"./format-length-c9d165c6.js";import"./get-53588a31.js";import"./use-locale-ba0171d5.js";import"./use-merged-state-d459d80e.js";import"./Suffix-9f9d022f.js";import"./Popover-907f9950.js";import"./_baseMap-d2a29d52.js";import"./cssr-7767064c.js";import"./use-compitable-248ca92d.js";import"./next-frame-once-7035a838.js";const q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},R=C("path",{d:"M632 888H392c-4.4 0-8 3.6-8 8v32c0 17.7 14.3 32 32 32h192c17.7 0 32-14.3 32-32v-32c0-4.4-3.6-8-8-8zM512 64c-181.1 0-328 146.9-328 328c0 121.4 66 227.4 164 284.1V792c0 17.7 14.3 32 32 32h264c17.7 0 32-14.3 32-32V676.1c98-56.7 164-162.7 164-284.1c0-181.1-146.9-328-328-328zm127.9 549.8L604 634.6V752H420V634.6l-35.9-20.8C305.4 568.3 256 484.5 256 392c0-141.4 114.6-256 256-256s256 114.6 256 256c0 92.5-49.4 176.3-128.1 221.8z",fill:"currentColor"},null,-1),S=[R],_=M({name:"BulbOutlined",render:function(o,s){return b(),y("svg",q,S)}});function A(e,o){const{t:s}=N.useI18n(),a=x({userManageForm:r(),model:{id:r(),username:r(""),password:r(""),status:r(0)},rules:{username:{required:!0,trigger:["input","blur"],message:s("user_manage.model_validate_tips")},password:{required:!0,trigger:["input","blur"],message:s("user_manage.model_validate_tips")}}}),n=m=>{a.userManageForm.validate(l=>{l||(m===0?i():d())})},u=()=>{a.model.id="",a.model.username="",a.model.password="",a.model.status=0},i=()=>{z({username:a.model.username,password:a.model.password,status:a.model.status,type:0}).then(()=>{o.emit("confirmModal",e.showModal)})},d=()=>{j(a.model.id,{username:a.model.username,password:a.model.password,status:a.model.status,type:0}).then(()=>{o.emit("confirmModal",e.showModal)})};return{state:a,handleValidate:n,clearForm:u}}function v(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!B(e)}const H={showModal:{type:Boolean,default:!1},status:{type:Number,default:0},row:{type:Object,default:{}}},ne=M({props:H,emits:["cancelModal","confirmModal"],setup(e,o){var l;const{t:s}=N.useI18n(),{state:a,handleValidate:n,clearForm:u}=A(e,o),i=(l=F())==null?void 0:l.appContext.config.globalProperties.trim,d=()=>{o.emit("cancelModal",e.showModal)},m=()=>{n(e.status)};return I(()=>e.showModal,()=>{u(),e.status===1&&(a.model.id=e.row.id,a.model.username=e.row.name,a.model.status=e.row.status),a.rules.password.required=e.row.id===void 0}),{t:s,...V(a),trim:i,handleCancel:d,handleConfirm:m}},render(){return t(O,{title:this.status===0?this.t("user_manage.create"):this.t("user_manage.edit"),show:this.showModal,onCancel:this.handleCancel,onConfirm:this.handleConfirm,confirmDisabled:!this.model.username||this.status===0&&!this.model.password},{default:()=>{let e,o;return t(U,{model:this.model,rules:this.rules,ref:"userManageForm"},{default:()=>[t(c,{label:this.t("user_manage.username"),path:"username"},{default:()=>[t(p,{align:"center"},{default:()=>[t(h,{clearable:!0,maxlength:"50","show-count":!0,allowInput:this.trim,style:{width:"510px"},value:this.model.username,"onUpdate:value":s=>this.model.username=s},null),t(f,{placement:"right",trigger:"hover"},{default:()=>t("span",null,[this.t("user_manage.username_tips")]),trigger:()=>t(w,{size:"20",style:{cursor:"pointer"}},{default:()=>[t(_,null,null)]})})]})]}),t(c,{label:this.t("user_manage.password"),path:"password"},{default:()=>[t(p,{align:"center"},{default:()=>[t(h,{clearable:!0,type:"password",maxlength:"6","show-count":!0,allowInput:this.trim,style:{width:"510px"},value:this.model.password,"onUpdate:value":s=>this.model.password=s},null),t(f,{placement:"right",trigger:"hover"},{default:()=>t("span",null,[this.t("user_manage.password_tips")]),trigger:()=>t(w,{size:"20",style:{cursor:"pointer"}},{default:()=>[t(_,null,null)]})})]})]}),t(c,{label:this.t("user_manage.state"),path:"status"},{default:()=>[t(k,{value:this.model.status,"onUpdate:value":s=>this.model.status=s},{default:()=>[t(g,{value:0},v(e=this.t("user_manage.enable"))?e:{default:()=>[e]}),t(g,{value:1},v(o=this.t("user_manage.disable"))?o:{default:()=>[o]})]})]})]})}})}});export{ne as default};
