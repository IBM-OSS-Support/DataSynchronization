import{v as S,i as d,q as N,e as b,n as C,k as x,m as z,o as P,w as q,t as M,p as o,N as v,s as V}from"./index-5e2885e4.js";import j from"./json-highlight-01c4f458.js";import{g as I}from"./table-13232376.js";import{u as O}from"./use-table-operation-946f3f7c.js";import"./index.module-a00bcd5b.js";import{N as R}from"./Popover-907f9950.js";import{E as D}from"./EditOutlined-0243f050.js";import{u as E}from"./use-table-c142822f.js";import{s as J}from"./index.module-dcaeed5e.js";import L from"./source-modal-de612839.js";import{N as U,a as B}from"./DataTable-bb49b036.js";import{N as _}from"./Space-d49acb7b.js";import{N as H}from"./Input-1bbd5e95.js";import"./lodash-11edae60.js";import"./text-4764a0ef.js";import"./use-compitable-248ca92d.js";import"./column-width-config-b963bc25.js";import"./DeleteOutlined-099c0ef1.js";import"./use-locale-ba0171d5.js";import"./Icon-b461a67a.js";import"./format-length-c9d165c6.js";import"./Tooltip-5624ecb6.js";import"./Switch-bdda7b10.js";import"./use-merged-state-d459d80e.js";import"./_baseMap-d2a29d52.js";import"./get-53588a31.js";import"./cssr-7767064c.js";import"./next-frame-once-7035a838.js";import"./index-569e3c49.js";import"./service-d19f0ccd.js";import"./Tabs-11369ba4.js";import"./Add-c7f60439.js";import"./throttle-c6377e77.js";import"./debounce-19376a56.js";import"./Empty-dd1b91e9.js";import"./Checkbox-2d4945a3.js";import"./RadioGroup-92bc79b0.js";import"./Suffix-9f9d022f.js";import"./Dropdown-8ccd025e.js";import"./create-bbda4d67.js";import"./Select-94feec49.js";function A(a){const{t:e}=S.useI18n();return{getColumns:()=>[...I([{key:"id",title:e("datasource.id")}]),{title:e("datasource.datasource_name"),key:"datasourceName"},{title:e("datasource.datasource_user_name"),key:"createUserName"},{title:e("datasource.datasource_type"),key:"pluginName",width:180},{title:e("datasource.datasource_parameter"),key:"parameter",width:180,render:t=>t.datasourceConfig?d(R,{trigger:"click"},{trigger:()=>d(N,{text:!0},{default:()=>e("datasource.click_to_view")}),default:()=>d(j,{params:JSON.stringify(t.datasourceConfig)})}):"--"},{title:e("datasource.description"),key:"description",render:t=>t.description||"-"},{title:e("datasource.create_time"),key:"createTime"},{title:e("datasource.update_time"),key:"updateTime"},O({title:e("datasource.operation"),key:"operation",buttons:[{text:e("datasource.edit"),icon:d(D),onClick:t=>void a(t.id,"edit")},{isDelete:!0,text:e("datasource.delete"),onPositiveClick:t=>void a(t.id,"delete"),negativeText:e("datasource.cancel"),positiveText:e("datasource.confirm"),popTips:e("datasource.delete_confirm")}]})]}}function w(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!V(a)}const Ve=b({setup:function(){const{t:a}=S.useI18n(),e=C(!1),s=C([]),t=x(),u=z(),{data:n,changePage:l,changePageSize:m,deleteRecord:f,updateList:h}=E(),g=()=>{h()},{getColumns:p}=A((r,k)=>{k==="edit"?t.push({name:"datasource-edit",params:{id:r}}):k==="delete"&&f(r)}),c=()=>{e.value=!0},i=()=>{e.value=!1},y=r=>{t.push({name:"datasource-create",query:{type:r}}),i()},T=()=>{const{searchVal:r}=u.query;r&&(n.searchVal=r)};return P(()=>{T(),(!u.query.tab||u.query.tab==="datasource")&&(l(1),s.value=p())}),q(S.useI18n().locale,()=>{s.value=p()}),{t:a,showSourceModal:e,columns:s,...M(n),changePage:l,changePageSize:m,onCreate:c,handleSearch:g,handleSelectSourceType:y,closeSourceModal:i}},render(){const{t:a,showSourceModal:e,columns:s,list:t,page:u,pageSize:n,itemCount:l,changePage:m,changePageSize:f,onCreate:h,handleSelectSourceType:g,closeSourceModal:p}=this;return o(_,{vertical:!0},{default:()=>[o(v,{title:a("datasource.datasource")},{"header-extra":()=>{let c,i;return o(_,null,{default:()=>[o(H,{value:this.searchVal,"onUpdate:value":y=>this.searchVal=y,placeholder:a("datasource.search_input_tips"),style:{width:"200px"}},null),o(N,{onClick:this.handleSearch,type:"primary"},w(c=this.t("datasource.search"))?c:{default:()=>[c]}),o(N,{onClick:h,type:"success"},w(i=a("datasource.create"))?i:{default:()=>[i]})]})}}),o(v,null,{default:()=>[o(U,{"row-class-name":"data-source-items",columns:s,data:t,striped:!0},null),o(B,{page:u,"page-size":n,"item-count":l,"show-quick-jumper":!0,"show-size-picker":!0,"page-sizes":[10,30,50],class:J.pagination,"on-update:page":m,"on-update:page-size":f},null)]}),o(L,{show:e,onChange:g,onCancel:p},null)]})}});export{Ve as default};
