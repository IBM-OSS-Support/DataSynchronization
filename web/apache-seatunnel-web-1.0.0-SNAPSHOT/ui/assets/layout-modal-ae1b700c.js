import{e as G,i as o,ad as Fe,ae as Se,aj as De,ah as Pe,B as Oe,c as J,Q as _e,u as Ae,f as oe,ao as Ue,n as V,H as ke,am as y,w as je,E as Ee,g as Le,av as Y,a9 as $e,aw as Z,ax as ze,ay as ee,an as ne,az as te,a7 as I,ac as He,v as Ge,p as m,F as Ke}from"./index-5e2885e4.js";import{M as We}from"./index-0bca5bb9.js";import{u as Qe}from"./use-locale-ba0171d5.js";import{u as Xe}from"./use-merged-state-d459d80e.js";import{N as qe}from"./Input-1bbd5e95.js";import{A as Je}from"./Add-c7f60439.js";import{N as Ye}from"./Form-6e61837b.js";import{N as $}from"./FormItem-7f69a4d7.js";import{N as Ze}from"./Select-94feec49.js";import"./Space-d49acb7b.js";import"./Suffix-9f9d022f.js";import"./format-length-c9d165c6.js";import"./get-53588a31.js";import"./use-compitable-248ca92d.js";import"./cssr-7767064c.js";import"./Popover-907f9950.js";import"./_baseMap-d2a29d52.js";import"./next-frame-once-7035a838.js";import"./create-bbda4d67.js";import"./Empty-dd1b91e9.js";const en=G({name:"Remove",render(){return o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},o("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),nn=n=>{const{textColorDisabled:i}=n;return{iconColorDisabled:i}},tn=Fe({name:"InputNumber",common:Se,peers:{Button:De,Input:Pe},self:nn}),ln=tn;function rn(n){return n==null||typeof n=="string"&&n.trim()===""?null:Number(n)}function an(n){return n.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(n)||/^\.\d+$/.test(n))}function z(n){return n==null?!0:!Number.isNaN(n)}function le(n,i){return n==null?"":i===void 0?String(n):n.toFixed(i)}function H(n){if(n===null)return null;if(typeof n=="number")return n;{const i=Number(n);return Number.isNaN(i)?null:i}}const on=Oe([J("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),J("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),ie=800,re=100,un=Object.assign(Object.assign({},oe.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),ae=G({name:"InputNumber",props:un,setup(n){_e(()=>{n.onChange!==void 0&&$e("input-number","`on-change` is deprecated, please use `on-update:value` instead")});const{mergedBorderedRef:i,mergedClsPrefixRef:p,mergedRtlRef:u}=Ae(n),a=oe("InputNumber","-input-number",on,ln,n,p),{localeRef:h}=Qe("InputNumber"),M=Ue(n),{mergedSizeRef:ue,mergedDisabledRef:se,mergedStatusRef:de}=M,v=V(null),K=V(null),W=V(null),D=V(n.defaultValue),fe=ke(n,"value"),f=Xe(fe,D),b=V(""),P=e=>{const t=String(e).split(".")[1];return t?t.length:0},ce=e=>{const t=[n.min,n.max,n.step,e].map(l=>l===void 0?0:P(l));return Math.max(...t)},me=y(()=>{const{placeholder:e}=n;return e!==void 0?e:h.value.placeholder}),C=y(()=>{const e=H(n.step);return e!==null?e===0?1:Math.abs(e):1}),Q=y(()=>{const e=H(n.min);return e!==null?e:null}),X=y(()=>{const e=H(n.max);return e!==null?e:null}),N=e=>{const{value:t}=f;if(e===t){x();return}const{"onUpdate:value":l,onUpdateValue:r,onChange:d}=n,{nTriggerFormInput:c,nTriggerFormChange:w}=M;d&&I(d,e),r&&I(r,e),l&&I(l,e),D.value=e,c(),w()},s=({offset:e,doUpdateIfValid:t,fixPrecision:l,isInputing:r})=>{const{value:d}=b;if(r&&an(d))return!1;const c=(n.parse||rn)(d);if(c===null)return t&&N(null),null;if(z(c)){const w=P(c),{precision:T}=n;if(T!==void 0&&T<w&&!l)return!1;let g=parseFloat((c+e).toFixed(T??ce(c)));if(z(g)){const{value:E}=X,{value:L}=Q;if(E!==null&&g>E){if(!t||r)return!1;g=E}if(L!==null&&g<L){if(!t||r)return!1;g=L}return n.validator&&!n.validator(g)?!1:(t&&N(g),g)}}return!1},x=()=>{const{value:e}=f;if(z(e)){const{format:t,precision:l}=n;t?b.value=t(e):e===null||l===void 0||P(e)>l?b.value=le(e,void 0):b.value=le(e,l)}else b.value=String(e)};x();const pe=y(()=>s({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),O=y(()=>{const{value:e}=f;if(n.validator&&e===null)return!1;const{value:t}=C;return s({offset:-t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),_=y(()=>{const{value:e}=f;if(n.validator&&e===null)return!1;const{value:t}=C;return s({offset:+t,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function he(e){const{onFocus:t}=n,{nTriggerFormFocus:l}=M;t&&I(t,e),l()}function ve(e){var t,l;if(e.target===((t=v.value)===null||t===void 0?void 0:t.wrapperElRef))return;const r=s({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(r!==!1){const w=(l=v.value)===null||l===void 0?void 0:l.inputElRef;w&&(w.value=String(r||"")),f.value===r&&x()}else x();const{onBlur:d}=n,{nTriggerFormBlur:c}=M;d&&I(d,e),c(),He(()=>{x()})}function ge(e){const{onClear:t}=n;t&&I(t,e)}function A(){const{value:e}=_;if(!e){j();return}const{value:t}=f;if(t===null)n.validator||N(q());else{const{value:l}=C;s({offset:l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function U(){const{value:e}=O;if(!e){k();return}const{value:t}=f;if(t===null)n.validator||N(q());else{const{value:l}=C;s({offset:-l,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const be=he,ye=ve;function q(){if(n.validator)return null;const{value:e}=Q,{value:t}=X;return e!==null?Math.max(0,e):t!==null?Math.min(0,t):0}function xe(e){ge(e),N(null)}function we(e){var t,l,r;!((t=W.value)===null||t===void 0)&&t.$el.contains(e.target)&&e.preventDefault(),!((l=K.value)===null||l===void 0)&&l.$el.contains(e.target)&&e.preventDefault(),(r=v.value)===null||r===void 0||r.activate()}let R=null,B=null,F=null;function k(){F&&(window.clearTimeout(F),F=null),R&&(window.clearInterval(R),R=null)}function j(){S&&(window.clearTimeout(S),S=null),B&&(window.clearInterval(B),B=null)}function Ie(){k(),F=window.setTimeout(()=>{R=window.setInterval(()=>{U()},re)},ie),Z("mouseup",document,k,{once:!0})}let S=null;function Ve(){j(),S=window.setTimeout(()=>{B=window.setInterval(()=>{A()},re)},ie),Z("mouseup",document,j,{once:!0})}const Me=()=>{B||A()},Ne=()=>{R||U()};function Re(e){var t,l;if(e.key==="Enter"){if(e.target===((t=v.value)===null||t===void 0?void 0:t.wrapperElRef))return;s({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((l=v.value)===null||l===void 0||l.deactivate())}else if(e.key==="ArrowUp"){if(!_.value||n.keyboard.ArrowUp===!1)return;e.preventDefault(),s({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&A()}else if(e.key==="ArrowDown"){if(!O.value||n.keyboard.ArrowDown===!1)return;e.preventDefault(),s({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&U()}}function Be(e){b.value=e,n.updateValueOnInput&&!n.format&&!n.parse&&n.precision===void 0&&s({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}je(f,()=>{x()});const Te={focus:()=>{var e;return(e=v.value)===null||e===void 0?void 0:e.focus()},blur:()=>{var e;return(e=v.value)===null||e===void 0?void 0:e.blur()}},Ce=Ee("InputNumber",u,p);return Object.assign(Object.assign({},Te),{rtlEnabled:Ce,inputInstRef:v,minusButtonInstRef:K,addButtonInstRef:W,mergedClsPrefix:p,mergedBordered:i,uncontrolledValue:D,mergedValue:f,mergedPlaceholder:me,displayedValueInvalid:pe,mergedSize:ue,mergedDisabled:se,displayedValue:b,addable:_,minusable:O,mergedStatus:de,handleFocus:be,handleBlur:ye,handleClear:xe,handleMouseDown:we,handleAddClick:Me,handleMinusClick:Ne,handleAddMousedown:Ve,handleMinusMousedown:Ie,handleKeyDown:Re,handleUpdateDisplayedValue:Be,mergedTheme:a,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:Le(()=>{const{self:{iconColorDisabled:e}}=a.value,[t,l,r,d]=ze(e);return{textColorTextDisabled:`rgb(${t}, ${l}, ${r})`,opacityDisabled:`${d}`}})})},render(){const{mergedClsPrefix:n,$slots:i}=this,p=()=>o(te,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>ee(i["minus-icon"],()=>[o(ne,{clsPrefix:n},{default:()=>o(en,null)})])}),u=()=>o(te,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>ee(i["add-icon"],()=>[o(ne,{clsPrefix:n},{default:()=>o(Je,null)})])});return o("div",{class:[`${n}-input-number`,this.rtlEnabled&&`${n}-input-number--rtl`]},o(qe,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,internalLoadingBeforeSuffix:!0},{prefix:()=>{var a;return this.showButton&&this.buttonPlacement==="both"?[p(),Y(i.prefix,h=>h?o("span",{class:`${n}-input-number-prefix`},h):null)]:(a=i.prefix)===null||a===void 0?void 0:a.call(i)},suffix:()=>{var a;return this.showButton?[Y(i.suffix,h=>h?o("span",{class:`${n}-input-number-suffix`},h):null),this.buttonPlacement==="right"?p():null,u()]:(a=i.suffix)===null||a===void 0?void 0:a.call(i)}}))}}),sn={showModalRef:{type:Boolean,default:!1}},Fn=G({name:"LayoutModal",props:sn,emits:["cancelModal","confirmModal"],setup(n,i){const{t:p}=Ge.useI18n(),u=V({layoutType:"dagre",rows:0,cols:0}),a=()=>{u.value.layoutType="dagre",u.value.rows=0,u.value.cols=0};return{t:p,model:u,onCancelModal:()=>{i.emit("cancelModal"),a()},onConfirmModal:()=>{i.emit("confirmModal",u.value.layoutType,u.value.cols,u.value.rows),a()}}},render(){return m(We,{title:this.t("project.synchronization_definition.format_canvas"),show:this.showModalRef,onCancel:this.onCancelModal,onConfirm:this.onConfirmModal},{default:()=>[m(Ye,{ref:"layoutFormRef",model:this.model},{default:()=>[m($,{label:this.t("project.synchronization_definition.layout_type"),path:"layoutType"},{default:()=>[m(Ze,{value:this.model.layoutType,"onUpdate:value":n=>this.model.layoutType=n,options:[{value:"dagre",label:this.t("project.synchronization_definition.dagre")},{value:"grid",label:this.t("project.synchronization_definition.grid")}]},null)]}),this.model.layoutType==="grid"&&m(Ke,null,[m($,{label:this.t("project.synchronization_definition.rows"),path:"rows"},{default:()=>[m(ae,{value:this.model.rows,"onUpdate:value":n=>this.model.rows=n,min:0},null)]}),m($,{label:this.t("project.synchronization_definition.cols"),path:"cols"},{default:()=>[m(ae,{value:this.model.cols,"onUpdate:value":n=>this.model.cols=n,min:0},null)]})])]})]})}});export{Fn as LayoutModal};
