import{e as _,v as N,H as f,n as g,p as r}from"./index-5e2885e4.js";import{u as h}from"./use-source-b1a7c19f.js";import{u as y}from"./use-table-c142822f.js";import{s as u}from"./index.module-fde20b4e.js";import{N as q}from"./Form-6e61837b.js";import{N as s}from"./FormItem-7f69a4d7.js";import{N as p}from"./Select-94feec49.js";import{N as w}from"./Input-1bbd5e95.js";import"./index-569e3c49.js";import"./service-d19f0ccd.js";import"./format-length-c9d165c6.js";import"./get-53588a31.js";import"./use-merged-state-d459d80e.js";import"./use-locale-ba0171d5.js";import"./use-compitable-248ca92d.js";import"./cssr-7767064c.js";import"./Popover-907f9950.js";import"./_baseMap-d2a29d52.js";import"./next-frame-once-7035a838.js";import"./Suffix-9f9d022f.js";import"./create-bbda4d67.js";import"./Empty-dd1b91e9.js";const J=_({name:"StepOneForm",props:{params:{type:Object,default:{}}},setup(l,{expose:n}){const{t:a}=N.useI18n(),{state:o}=h(!0),{data:i,getList:d}=y(),c={pluginName:{required:!0,trigger:["input","blur"],message:a("virtual_tables.source_type_tips")},datasourceName:{required:!0,trigger:["input","blur"],message:a("virtual_tables.source_name_tips")},tableName:{required:!0,trigger:["input","blur"],message:a("virtual_tables.virtual_tables_name_tips")}},t=f(l,"params"),m=g(),v=e=>{e!==t.value.pluginName&&(i.pageSize=99999,d(e),t.value.datasourceName=null,t.value.tableName=null)};return n({validate:async()=>{await m.value.validate()}}),()=>r(q,{rules:c,ref:m,"require-mark-placement":"left","label-align":"right",labelPlacement:"left",model:t.value,labelWidth:100},{default:()=>[r(s,{label:a("virtual_tables.source_type"),path:"pluginName","show-require-mark":!0},{default:()=>[r(p,{value:l.params.pluginName,"onUpdate:value":e=>l.params.pluginName=e,filterable:!0,placeholder:a("virtual_tables.source_type_tips"),options:o.types,loading:o.loading,class:u["type-width"],onUpdateValue:e=>void v(e)},null)]}),r(s,{label:a("virtual_tables.source_name"),path:"datasourceName","show-require-mark":!0},{default:()=>[r(p,{value:t.value.datasourceName,"onUpdate:value":e=>t.value.datasourceName=e,filterable:!0,placeholder:a("virtual_tables.source_name_tips"),options:i.list.map(e=>({label:e.datasourceName,value:e.datasourceName,id:e.id})),class:u["type-width"],onUpdateValue:(e,b)=>{t.value.datasourceId=b.id}},null)]}),r(s,{label:a("virtual_tables.virtual_tables_name"),path:"tableName","show-require-mark":!0},{default:()=>[r(w,{value:t.value.tableName,"onUpdate:value":e=>t.value.tableName=e,clearable:!0,placeholder:a("virtual_tables.virtual_tables_name_tips"),class:u["type-width"]},null)]})]})}});export{J as default};
